# MBTI風性格診断アプリケーション - 使用方法

## クイックスタート

### 1. アプリケーションを起動

```bash
./run_app.sh start
```

実行結果:
```
==========================================
  MBTI風性格診断
==========================================

✓ Poetry環境を検出しました
✓ 依存パッケージを確認中...
✓ アプリケーションを起動しています...

✓ アプリケーションが起動しました！

ブラウザで以下のURLにアクセスしてください：
  → http://localhost:5000

PID: 12345
ログファイル: app.log
==========================================
```

### 2. ブラウザでアクセス

ブラウザを開いて、以下のURLにアクセスします：

```
http://localhost:5000
```

### 3. 状態を確認

```bash
./run_app.sh status
```

実行結果:
```
==========================================
  MBTI風性格診断
==========================================

✓ アプリケーションは実行中です

  PID: 12345
  URL: http://localhost:5000
  ログ: app.log

プロセス情報:
  PID  PPID USER    %CPU %MEM     ELAPSED COMMAND
12345     1 user     0.0  0.5       00:05 python app.py
==========================================
```

### 4. ログを確認

リアルタイムでログを確認する場合:

```bash
tail -f app.log
```

最新のログを表示する場合:

```bash
tail -n 50 app.log
```

### 5. アプリケーションを停止

```bash
./run_app.sh stop
```

実行結果:
```
==========================================
  MBTI風性格診断
==========================================

✓ アプリケーションを停止しています... (PID: 12345)
✓ アプリケーションを停止しました
==========================================
```

### 6. アプリケーションを再起動

```bash
./run_app.sh restart
```

設定を変更した後などに使用します。

---

## コマンド一覧

| コマンド | 説明 |
|---------|------|
| `./run_app.sh start` | アプリケーションをバックグラウンドで起動 |
| `./run_app.sh stop` | アプリケーションを停止 |
| `./run_app.sh restart` | アプリケーションを再起動（stop → start） |
| `./run_app.sh status` | アプリケーションの実行状態を確認 |

---

## トラブルシューティング

### アプリケーションが起動しない場合

1. **ログファイルを確認**
   ```bash
   cat app.log
   ```

2. **ポート5000が使用中かチェック**
   ```bash
   lsof -i:5000
   ```
   
   他のプロセスが使用している場合は停止してください。

3. **依存パッケージを再インストール**
   ```bash
   poetry install
   ```

### アプリケーションが停止しない場合

強制停止を試みてください:

```bash
# PIDファイルからプロセスIDを取得
PID=$(cat app.pid)

# プロセスを強制終了
kill -9 $PID

# PIDファイルを削除
rm app.pid
```

### ポートを変更したい場合

`app.py` の最終行を編集します:

```python
# デフォルト
app.run(debug=True, host='0.0.0.0', port=5000)

# ポート8080に変更する場合
app.run(debug=True, host='0.0.0.0', port=8080)
```

---

## フォアグラウンドで起動（開発モード）

デバッグやログをリアルタイムで確認したい場合は、フォアグラウンドで起動できます:

```bash
# Poetry環境の場合
poetry run python app.py

# または
python app.py
```

停止するには `Ctrl + C` を押します。

---

## 注意事項

- アプリケーションはバックグラウンドで実行されるため、ターミナルを閉じても動作し続けます
- 必要に応じて `./run_app.sh stop` で明示的に停止してください
- `app.pid` ファイルには実行中のプロセスIDが記録されます
- `app.log` ファイルにはアプリケーションのログが記録されます

---

## 参考リンク

- 詳細な設計書: `README_APP.md`
- アプリケーションコード: `app.py`
- 質問データ: `questions.py`

