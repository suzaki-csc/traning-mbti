#================================================================================#
# パスワード強度チェッカー 
#   作成用プロンプト集（システム要件定義、設計、コード生成、起動方法、Dockerの利用、データベースの構築、ログイン機能、管理機能の実装、その他修正）
#================================================================================#

## 1. アプリケーション環境構築

Python環境はディレクトリ内で完結したいので、pyenv + poetoryの環境を作りたいです。このディレクトリをROOTにして、環境構築をしてください。
すでに環境がある場合は、それを利用してください。

このプロジェクトでは、python/flask/bootstrap/docker/docker-compose/mysqlを使用します。必要となるpython packageを
poetryで管理をしてください。

poetryはすでに構築されている可能性があります。
環境確認をして、構築されていない場合は環境作成を実施、構築されている場合は何もしないでください、

------------------------------------------------------------
## 2. 要件定義、設計

「パスワード強度チェッカー」を作りたいです。

要件:
- 日本語UI。アクセシビリティ配慮（ラベル、コントラスト、キーボード操作可）
- 機能:
  1) パスワード入力で即時に強度メーター（5段階: Very Weak / Weak / Fair / Strong / Very Strong、日本語表示）
  2) スコア算出は以下を組合せ: 長さ、文字種(小/大/数字/記号)、繰り返し/連番/キーボード並び(簡易)、よくある単語(小さな辞書を埋め込み)
  3) 推定エントロピー(bit)とオフライン総当たり想定時間(概算)を表示
  4) 改善アドバイスの日本語リストを提示（例: 長さを12文字以上、辞書語を避ける、似た置換"@→a"を避ける等）
  5) 「表示/非表示」トグル、クリップボードコピー、ランダム安全候補の提案ボタン（12～16文字、複数種）

- 実装メモ:
  - 依存ライブラリなし（zxcvbn等は使わず、軽量な自作ロジック）
  - 簡易辞書: "password, qwerty, 123456, admin, letmein, welcome, iloveyou" などをハードコード
  - 連番/キーボード並びの簡易検出(例: "1234", "qwerty", "asdf" 等)
  - すべての関数に初心者向けコメントを入れる
  - 最下部に「実装方針と採点式の説明」を日本語で記載

実装はせずに、markdownファイルへの出力をお願いします。

------------------------------
## 3. コード生成
[出力されたマークダウンファイルを添付]
定義した仕様で動く最小アプリのコード一式を生成してください。

------------------------------------------------------------
## 4. （起動方法がわからない場合には）
起動用のラッパーシェルの作成、及び、起動方法をREADME_APP.mdに記載をお願いします。

------------------------------------------------------------
## 5. Dockerの利用
システムはDockerで構築をしたいです。
構成が増えることを見越して、docker-compose.ymlを作成してください
先に作成したラッパーシェルもdocker-composeを使用して起動・停止するようにしてください

------------------------------------------------------------
## 6. データベースの構築（DBがすでに存在している場合は、作業として不要）
データベースはMySQLを使用します。
データベースはDockerfile, Docker Composeを使用して構築をしてください。
データベースは、アプリケーションと別々のコンテナで構築をして、コンテナ間の通信はDocker Composeで行います。

データベースは初期化されており、アプリケーションから接続するためのユーザを作成してください

------------------------------------------------------------
## 7. 結果保管機能
- パスワードチェックの結果をDBに保管してください
- パスワードは「複合不可なハッシュ値」「先頭1文字＋マスク文字」の2種類で保管します
- 他に、パスワードチェックの結果をDBに保管をします。

------------------------------------------------------------
## 8. ログイン機能、管理機能の実装

ログイン、ログアウトの機能を実装してください
ユーザデータはデータベースで管理します

ユーザはユーザIDとパスワードでログインをします。
ユーザ登録をする際は、ユーザID、メールアドレス、パスワードを登録します。

ユーザのロールは、「一般ユーザ」と「管理者」の2種類があります。
一般ユーザは、自分の診断履歴の確認ができます
管理者は、全ユーザの診断履歴の確認、ユーザの管理、クイズの管理ができます
ユーザの管理とは、ユーザの一覧表示、ユーザの詳細表示、ユーザ情報・ロールの変更、ユーザの削除を指します
クイズの管理とは、カテゴリの作成・修正・削除、クイズの作成・修正・削除を指します

デフォルト管理者として、ID: admin@example.com, password: admin123 を作成してください

------------------------------------------------------------
## 9. その他修正（レイアウト、文言、その多機能）
[画面を見ながら、例を参考にして修正をしてください]

- 「会社・学校での政策に沿った強度要件をカスタム定義」できるセクションを追加してください
- カスタム定義としては、文字の最小長、禁止文字種、禁止語（単語等）を設定できるようにしてください

- パスワード入力画面の上部に、進捗バー（パスワードの現在位置/総数）を追加してください
- 進行バーの色は、パスワードの強度で異なる色にしてください

- 管理画面/ユーザ管理画面において、「操作」のボタンが単に色がついているだけで分かりづらく、誤操作をしやすいです
  - ボタンを見間違えないように、見てわかるように修正をしてください





